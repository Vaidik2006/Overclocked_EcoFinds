<!-- views/search.ejs -->
<%- include('./includes/navbar') %>

<div style="max-width: 1200px; margin: 30px auto; font-family: Arial, sans-serif; display: flex; gap: 20px;">

    <!-- Sidebar Filters -->
    <aside style="width: 280px; padding: 20px; border: 1px solid #ddd; border-radius: 8px;">
        <h2 style="margin-bottom: 15px;">Filters</h2>

        <!-- Categories -->
        <div style="margin-bottom: 20px;">
            <h3>Categories</h3>
            <ul style="list-style: none; padding-left: 0;">
                <% [
                    "Motors",
                    "Electronics",
                    "Clothing & Accessories",
                    "Business & Industrial",
                    "Home & Lifestyle",
                    "Sporting Goods",
                    "Jewelry & Watches",
                    "Collectibles & Art",
                    "Other Categories",
                    "Accessories",
                    "Toys & Collectibles",
                    "Office Supplies",
                    "Books & Stationery"
                ].forEach(category => { %>
                    <li>
                        <label>
                            <input type="checkbox" name="category" value="<%= category %>">
                            <%= category %>
                        </label>
                    </li>
                <% }) %>
            </ul>
        </div>

        <!-- Price Filter -->
        <div style="margin-bottom: 20px;">
            <h3>Price Range</h3>
            <label>Min:</label>
            <input type="number" name="minPrice" placeholder="0" style="width: 100%; margin-bottom: 5px;">
            <label>Max:</label>
            <input type="number" name="maxPrice" placeholder="50000" style="width: 100%;">
        </div>

        <!-- Condition Filter -->
        <div style="margin-bottom: 20px;">
            <h3>Condition</h3>
            <label><input type="radio" name="condition" value="New"> New</label><br>
            <label><input type="radio" name="condition" value="Used"> Used</label><br>
            <label><input type="radio" name="condition" value="Used - like new"> Used</label><br>
            <label><input type="radio" name="condition" value="Used - good"> Used</label><br> 
            <label><input type="radio" name="condition" value="Refurbished"> Refurbished</label>
        </div>

        <!-- Year of Manufacture -->
        <div style="margin-bottom: 20px;">
            <h3>Year of Manufacture</h3>
            <input type="number" name="minYear" placeholder="2000" style="width: 100%; margin-bottom: 5px;">
            <input type="number" name="maxYear" placeholder="2025" style="width: 100%;">
        </div>

        <!-- Search Button -->
        <button type="submit" style="padding: 10px 20px; background: #8000ff9c; color: white; border: none; cursor: pointer; width: 100%;">
            Apply Filters
        </button>
    </aside>

    <!-- Search Results Section -->
    <section style="flex-grow: 1;">
        <h2>Search Results</h2>

        <% if (products && products.length > 0) { %>
            <% products.forEach(product => { %>
                <div style="display: flex; align-items: flex-start; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 8px; overflow: hidden;">
                    <img src="<%= product.image %>" alt="<%= product.title %>" style="width: 150px; height: 150px; object-fit: cover; margin-right: 20px;">
                    <div style="padding: 10px;">
                        <h3><%= product.title %></h3>
                        <p><%= product.description %></p>
                        <p><strong>â‚¹<%= product.price %></strong></p>
                        <p>Condition: <%= product.condition %></p>
                        <p>Year: <%= product.year_of_manufacture %></p>
                        <form action="/cart/add/<%= product._id %>" method="POST">
                            <button type="submit" style="padding: 5px 15px; background: green; color: white; border: none; cursor: pointer;">
                                Add to Cart
                            </button>
                        </form>
                    </div>
                </div>
            <% }) %>
        <% } else { %>
            <p>No products found. Try adjusting your filters.</p>
        <% } %>
    </section>
</div>

<%- include('./includes/footer') %>

